apiVersion: apis.kcp.io/v1alpha1
kind: APIResourceSchema
metadata:
  creationTimestamp: null
  name: v250808-79715d6e.placements.workload.kcp.io
spec:
  group: workload.kcp.io
  names:
    categories:
    - kcp
    kind: Placement
    listKind: PlacementList
    plural: placements
    singular: placement
  scope: Cluster
  versions:
  - additionalPrinterColumns:
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    - jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    name: v1alpha1
    schema:
      description: |-
        Placement represents a workload placement policy within KCP's TMC system.
        It defines how workloads should be placed across available clusters based on
        specified constraints and requirements.
      properties:
        apiVersion:
          description: |-
            APIVersion defines the versioned schema of this representation of an object.
            Servers should convert recognized schemas to the latest internal value, and
            may reject unrecognized values.
            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
          type: string
        kind:
          description: |-
            Kind is a string value representing the REST resource this object represents.
            Servers may infer this from the endpoint the client submits requests to.
            Cannot be updated.
            In CamelCase.
            More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
          type: string
        metadata:
          type: object
        spec:
          description: PlacementSpec defines the desired state of Placement.
          properties:
            constraints:
              description: Constraints define placement constraints that must be satisfied.
              properties:
                affinity:
                  description: Affinity specifies affinity constraints for cluster
                    placement.
                  properties:
                    clusterAffinity:
                      description: ClusterAffinity specifies cluster-level affinity
                        constraints.
                      properties:
                        preferredDuringSchedulingIgnoredDuringExecution:
                          description: PreferredDuringSchedulingIgnoredDuringExecution
                            specifies soft constraints.
                          items:
                            description: WeightedClusterAffinityTerm defines a weighted
                              cluster affinity term.
                            properties:
                              clusterAffinityTerm:
                                description: ClusterAffinityTerm is the affinity term.
                                properties:
                                  labelSelector:
                                    description: LabelSelector selects clusters by
                                      labels.
                                    properties:
                                      matchExpressions:
                                        description: matchExpressions is a list of
                                          label selector requirements. The requirements
                                          are ANDed.
                                        items:
                                          description: |-
                                            A label selector requirement is a selector that contains values, a key, and an operator that
                                            relates the key and values.
                                          properties:
                                            key:
                                              description: key is the label key that
                                                the selector applies to.
                                              type: string
                                            operator:
                                              description: |-
                                                operator represents a key's relationship to a set of values.
                                                Valid operators are In, NotIn, Exists and DoesNotExist.
                                              type: string
                                            values:
                                              description: |-
                                                values is an array of string values. If the operator is In or NotIn,
                                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                the values array must be empty. This array is replaced during a strategic
                                                merge patch.
                                              items:
                                                type: string
                                              type: array
                                              x-kubernetes-list-type: atomic
                                          required:
                                          - key
                                          - operator
                                          type: object
                                        type: array
                                        x-kubernetes-list-type: atomic
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                        description: |-
                                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                                        type: object
                                    type: object
                                    x-kubernetes-map-type: atomic
                                  locationNames:
                                    description: LocationNames specifies specific
                                      location names.
                                    items:
                                      type: string
                                    type: array
                                type: object
                              weight:
                                description: Weight associated with matching the corresponding
                                  clusterAffinityTerm.
                                format: int32
                                maximum: 100
                                minimum: 1
                                type: integer
                            required:
                            - clusterAffinityTerm
                            - weight
                            type: object
                          type: array
                        requiredDuringSchedulingIgnoredDuringExecution:
                          description: RequiredDuringSchedulingIgnoredDuringExecution
                            specifies hard constraints.
                          properties:
                            labelSelector:
                              description: LabelSelector selects clusters by labels.
                              properties:
                                matchExpressions:
                                  description: matchExpressions is a list of label
                                    selector requirements. The requirements are ANDed.
                                  items:
                                    description: |-
                                      A label selector requirement is a selector that contains values, a key, and an operator that
                                      relates the key and values.
                                    properties:
                                      key:
                                        description: key is the label key that the
                                          selector applies to.
                                        type: string
                                      operator:
                                        description: |-
                                          operator represents a key's relationship to a set of values.
                                          Valid operators are In, NotIn, Exists and DoesNotExist.
                                        type: string
                                      values:
                                        description: |-
                                          values is an array of string values. If the operator is In or NotIn,
                                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                          the values array must be empty. This array is replaced during a strategic
                                          merge patch.
                                        items:
                                          type: string
                                        type: array
                                        x-kubernetes-list-type: atomic
                                    required:
                                    - key
                                    - operator
                                    type: object
                                  type: array
                                  x-kubernetes-list-type: atomic
                                matchLabels:
                                  additionalProperties:
                                    type: string
                                  description: |-
                                    matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                    map is equivalent to an element of matchExpressions, whose key field is "key", the
                                    operator is "In", and the values array contains only "value". The requirements are ANDed.
                                  type: object
                              type: object
                              x-kubernetes-map-type: atomic
                            locationNames:
                              description: LocationNames specifies specific location
                                names.
                              items:
                                type: string
                              type: array
                          type: object
                      type: object
                    clusterAntiAffinity:
                      description: ClusterAntiAffinity specifies cluster-level anti-affinity
                        constraints.
                      properties:
                        preferredDuringSchedulingIgnoredDuringExecution:
                          description: PreferredDuringSchedulingIgnoredDuringExecution
                            specifies soft constraints.
                          items:
                            description: WeightedClusterAffinityTerm defines a weighted
                              cluster affinity term.
                            properties:
                              clusterAffinityTerm:
                                description: ClusterAffinityTerm is the affinity term.
                                properties:
                                  labelSelector:
                                    description: LabelSelector selects clusters by
                                      labels.
                                    properties:
                                      matchExpressions:
                                        description: matchExpressions is a list of
                                          label selector requirements. The requirements
                                          are ANDed.
                                        items:
                                          description: |-
                                            A label selector requirement is a selector that contains values, a key, and an operator that
                                            relates the key and values.
                                          properties:
                                            key:
                                              description: key is the label key that
                                                the selector applies to.
                                              type: string
                                            operator:
                                              description: |-
                                                operator represents a key's relationship to a set of values.
                                                Valid operators are In, NotIn, Exists and DoesNotExist.
                                              type: string
                                            values:
                                              description: |-
                                                values is an array of string values. If the operator is In or NotIn,
                                                the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                                the values array must be empty. This array is replaced during a strategic
                                                merge patch.
                                              items:
                                                type: string
                                              type: array
                                              x-kubernetes-list-type: atomic
                                          required:
                                          - key
                                          - operator
                                          type: object
                                        type: array
                                        x-kubernetes-list-type: atomic
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                        description: |-
                                          matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                          map is equivalent to an element of matchExpressions, whose key field is "key", the
                                          operator is "In", and the values array contains only "value". The requirements are ANDed.
                                        type: object
                                    type: object
                                    x-kubernetes-map-type: atomic
                                  locationNames:
                                    description: LocationNames specifies specific
                                      location names.
                                    items:
                                      type: string
                                    type: array
                                type: object
                              weight:
                                description: Weight associated with matching the corresponding
                                  clusterAffinityTerm.
                                format: int32
                                maximum: 100
                                minimum: 1
                                type: integer
                            required:
                            - clusterAffinityTerm
                            - weight
                            type: object
                          type: array
                        requiredDuringSchedulingIgnoredDuringExecution:
                          description: RequiredDuringSchedulingIgnoredDuringExecution
                            specifies hard constraints.
                          items:
                            description: ClusterAffinityTerm defines a cluster affinity
                              term.
                            properties:
                              labelSelector:
                                description: LabelSelector selects clusters by labels.
                                properties:
                                  matchExpressions:
                                    description: matchExpressions is a list of label
                                      selector requirements. The requirements are
                                      ANDed.
                                    items:
                                      description: |-
                                        A label selector requirement is a selector that contains values, a key, and an operator that
                                        relates the key and values.
                                      properties:
                                        key:
                                          description: key is the label key that the
                                            selector applies to.
                                          type: string
                                        operator:
                                          description: |-
                                            operator represents a key's relationship to a set of values.
                                            Valid operators are In, NotIn, Exists and DoesNotExist.
                                          type: string
                                        values:
                                          description: |-
                                            values is an array of string values. If the operator is In or NotIn,
                                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                                            the values array must be empty. This array is replaced during a strategic
                                            merge patch.
                                          items:
                                            type: string
                                          type: array
                                          x-kubernetes-list-type: atomic
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                    x-kubernetes-list-type: atomic
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    description: |-
                                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                                    type: object
                                type: object
                                x-kubernetes-map-type: atomic
                              locationNames:
                                description: LocationNames specifies specific location
                                  names.
                                items:
                                  type: string
                                type: array
                            type: object
                          type: array
                      type: object
                  type: object
                tolerations:
                  description: Tolerations allow placement on clusters with matching
                    taints.
                  items:
                    description: PlacementToleration represents a toleration for cluster
                      taints.
                    properties:
                      effect:
                        description: Effect indicates the taint effect to match.
                        type: string
                      key:
                        description: Key is the taint key that the toleration applies
                          to.
                        type: string
                      operator:
                        description: Operator represents a key's relationship to the
                          value.
                        type: string
                      tolerationSeconds:
                        description: TolerationSeconds represents the period of time
                          the toleration tolerates the taint.
                        format: int64
                        type: integer
                      value:
                        description: Value is the taint value the toleration matches
                          to.
                        type: string
                    type: object
                  type: array
              type: object
            locationSelector:
              description: LocationSelector defines the criteria for selecting target
                locations.
              properties:
                matchExpressions:
                  description: MatchExpressions is a list of label selector requirements
                    for locations.
                  items:
                    description: |-
                      A label selector requirement is a selector that contains values, a key, and an operator that
                      relates the key and values.
                    properties:
                      key:
                        description: key is the label key that the selector applies
                          to.
                        type: string
                      operator:
                        description: |-
                          operator represents a key's relationship to a set of values.
                          Valid operators are In, NotIn, Exists and DoesNotExist.
                        type: string
                      values:
                        description: |-
                          values is an array of string values. If the operator is In or NotIn,
                          the values array must be non-empty. If the operator is Exists or DoesNotExist,
                          the values array must be empty. This array is replaced during a strategic
                          merge patch.
                        items:
                          type: string
                        type: array
                        x-kubernetes-list-type: atomic
                    required:
                    - key
                    - operator
                    type: object
                  type: array
                matchLabels:
                  additionalProperties:
                    type: string
                  description: MatchLabels is a map of {key,value} pairs matching
                    location labels.
                  type: object
              type: object
            numberOfClusters:
              description: |-
                NumberOfClusters specifies how many clusters the workload should be placed on.
                If not specified, the scheduler will determine the optimal number.
              format: int32
              minimum: 1
              type: integer
            workloadReference:
              description: WorkloadReference specifies which workload this placement
                applies to.
              properties:
                apiVersion:
                  description: APIVersion of the referenced workload.
                  type: string
                kind:
                  description: Kind of the referenced workload.
                  type: string
                name:
                  description: Name of the referenced workload.
                  type: string
                namespace:
                  description: Namespace of the referenced workload (if namespaced).
                  type: string
              required:
              - apiVersion
              - kind
              - name
              type: object
          required:
          - workloadReference
          type: object
        status:
          description: PlacementStatus represents the observed state of Placement.
          properties:
            conditions:
              description: Conditions contain details about the placement state.
              items:
                description: Condition contains details for one aspect of the current
                  state of this API Resource.
                properties:
                  lastTransitionTime:
                    description: |-
                      lastTransitionTime is the last time the condition transitioned from one status to another.
                      This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                    format: date-time
                    type: string
                  message:
                    description: |-
                      message is a human readable message indicating details about the transition.
                      This may be an empty string.
                    maxLength: 32768
                    type: string
                  observedGeneration:
                    description: |-
                      observedGeneration represents the .metadata.generation that the condition was set based upon.
                      For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                      with respect to the current state of the instance.
                    format: int64
                    minimum: 0
                    type: integer
                  reason:
                    description: |-
                      reason contains a programmatic identifier indicating the reason for the condition's last transition.
                      Producers of specific condition types may define expected values and meanings for this field,
                      and whether the values are considered a guaranteed API.
                      The value should be a CamelCase string.
                      This field may not be empty.
                    maxLength: 1024
                    minLength: 1
                    pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                    type: string
                  status:
                    description: status of the condition, one of True, False, Unknown.
                    enum:
                    - "True"
                    - "False"
                    - Unknown
                    type: string
                  type:
                    description: type of condition in CamelCase or in foo.example.com/CamelCase.
                    maxLength: 316
                    pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                    type: string
                required:
                - lastTransitionTime
                - message
                - reason
                - status
                - type
                type: object
              type: array
            observedGeneration:
              description: ObservedGeneration reflects the generation observed by
                the controller.
              format: int64
              type: integer
            placementDecisions:
              description: PlacementDecisions contains the results of placement decisions.
              items:
                description: PlacementDecision represents a placement decision for
                  a specific cluster.
                properties:
                  clusterName:
                    description: ClusterName is the name of the cluster where the
                      workload is placed.
                    type: string
                  location:
                    description: Location is the location information of the cluster.
                    type: string
                  reason:
                    description: Reason explains why this cluster was selected.
                    type: string
                  score:
                    description: Score represents the placement score for this cluster
                      (0-100).
                    format: int32
                    maximum: 100
                    minimum: 0
                    type: integer
                required:
                - clusterName
                type: object
              type: array
          type: object
      type: object
    served: true
    storage: true
    subresources:
      status: {}
